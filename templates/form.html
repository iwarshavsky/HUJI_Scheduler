<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hebrew University Schedule Planner</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='agenda.css') }}">
</head>
<body>

<h1>Hebrew University Schedule Planner</h1>
<div class="container">
    <!-- Left: Form Section -->
    <div class="form-section">
        <form onsubmit="return validateForm()" method="post" id="requestForm" action="/submit">
            <label for="year">Year:</label>
            <input type="number" id="year" name="year" min="1900" max="2100" value="2025">


            <label for="semester">Semester (A or B):</label>
            <input type="text" id="semester" name="semester" pattern="[AB]{1}" value="A">

            <label for="courseNumberInput">Course Number (up to 6 digits):</label>
            <div class="course-entry">
                <input type="text" id="courseNumberInput" maxlength="6" pattern="\d{1,6}"
                       placeholder="Enter course number" value="8013">
                <button type="button" onclick="addCourse()">Add Course</button>
            </div>


            <!-- Hidden input for submission -->
            <input type="hidden" name="courses" id="coursesHidden">

            <!-- Display added courses -->
            <div id="courseList" style="margin-top: 10px;"></div>


            <label for="maxDayLength">Maximal Day Length:</label>
            <select id="maxDayLength" name="max_day_length"></select>

            <label for="minDayLength">Minimal Day Length:</label>
            <select id="minDayLength" name="min_day_length"></select>

            <label for="minFreeDays">Minimal Number of Free Days:</label>
            <input type="number" id="minFreeDays" name="min_free_days" min="0">

            <label for="globalStartTime">Global Start Time:</label>
            <select id="globalStartTime" name="globalStartTime"></select>

            <div class="grouped">
                <label for="dayWithBreakDayLength">Day With Break - Day Length:</label>
                <select id="dayWithBreakDayLength" name="dayWithBreak_DayLength"></select>

                <label for="dayWithBreakBreakLength">Day With Break - Break Length:</label>
                <select id="dayWithBreakBreakLength" name="dayWithBreak_BreakLength"></select>
            </div>
            <div id="errorsContainer"></div>
            <button type="submit">Submit</button>
        </form>
    </div>
    <!-- Right: Empty Div Section -->
    <div class="preview-section">
        <div id="agendaContainer"></div>
        <footer></footer>
        <button id="getNextBtn_post">Get Next (POST)</button>
        <script src="https://unpkg.com/xlsx@0.15.1/dist/xlsx.full.min.js"></script>
        <script>
            function exportTableToExcel(tableId, filename = 'data.xlsx') {
                const table = document.getElementById(tableId);
                const wb = XLSX.utils.table_to_book(table, {raw: false, cellStyles: true});
                XLSX.writeFile(wb, filename);
            }
        </script>
        <a onclick="exportTableToExcel('agenda')" href="#">Client Excel</a>
        <a href="/get/0">Download</a>
        <!--        <button id="getNextBtn_get">Get Next (GET)</button>-->
        <!-- This space can be used for dynamic content -->
    </div>
</div>


<div id="jsonModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h3>Edit pool_dict</h3>
        <div id="editorContainer"></div>
        <button onclick="deletePoolDict()">ðŸ—‘ Delete pool_dict</button>
    </div>
</div>


<script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>

